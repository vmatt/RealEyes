(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};/*!
                                                                                                                                                                                                                                                                               * @realeyes/environment-checker version: 2.3.1
                                                                                                                                                                                                                                                                               * Built on: 2017-03-10T13:25:37.998Z
                                                                                                                                                                                                                                                                               * Released under the Apache License, Version 2.0
                                                                                                                                                                                                                                                                               * @copyright Realeyes OU. All rights reserved.
                                                                                                                                                                                                                                                                               */
var _swfobject=require("swfobject");var _swfobject2=_interopRequireDefault(_swfobject);var _v=require("uuid/v4");var _v2=_interopRequireDefault(_v);var _environmentDetector=require("@realeyes/environment-detector");var _environmentDetector2=_interopRequireDefault(_environmentDetector);var _browsers=require("@realeyes/environment-detector/lib/browsers");var _browsers2=_interopRequireDefault(_browsers);var _platform=require("@realeyes/environment-detector/lib/platform");var _platform2=_interopRequireDefault(_platform);var _capabilities=require("@realeyes/environment-detector/lib/capabilities");var _capabilities2=_interopRequireDefault(_capabilities);var _Logger=require("@realeyes/environment-detector/lib/utils/Logger");var _Logger2=_interopRequireDefault(_Logger);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var DEFAULT_FLASH_DETECTOR_PATH="https://codesdwncdn.realeyesit.com/environment-checker/release/2.3.1/environment-detector.swf";function inArray(arr,value){if(typeof Array.prototype.indexOf==="function"){return arr.indexOf(value)!==-1}for(var i=0;i<arr.length;i++){if(arr[i]===value){return true}}return false}function compareVersions(v1,v2){var s1=v1.split(".");var s2=v2.split(".");for(var i=0;i<Math.max(s1.length,s2.length);i++){var n1=parseInt(s1[i]||0,10);var n2=parseInt(s2[i]||0,10);if(n1>n2)return 1;if(n2>n1)return-1}return 0}function getFirstMatch(str,regex){var match=str.match(regex);if(match&&match.length>1){return match[1]}return""}window.Realeyesit=window.Realeyesit||{};window.Realeyesit.EnvironmentalDetectionAPI={VERSION:"2.3.1",BLACKLISTED_FLASH_VERSIONS:["11.4.31.110"],MIN_FLASH_VERSION:"10.2.0",BLACKLISTED_BROWSERS:[[_browsers2["default"].names.INTERNET_EXPLORER,"0-8"],[_browsers2["default"].names.FIREFOX,"0-3"],[_browsers2["default"].names.OPERA,"0-11"]],checkResults:{checksPassed:null,failureReasonCode:null,failureReasonString:null},failureReasonCodes:{FLASH_NOT_INSTALLED:1,FLASH_TOO_OLD:2,FLASH_BLACKLISTED:3,BROWSER_NOT_CAPABLE:4,MOBILE_BROWSER:5,NO_WEBCAMS_DETECTED:6,OTHER_ERROR:7},start:function start(callback){var _this=this;var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$flash=_ref.flash,flash=_ref$flash===undefined?{path:DEFAULT_FLASH_DETECTOR_PATH}:_ref$flash,_ref$logger=_ref.logger,logger=_ref$logger===undefined?{}:_ref$logger;var loggerOpts={disable:logger.disable,sid:(0,_v2["default"])()};var ecLogger=new _Logger2["default"](loggerOpts);ecLogger.log("environment-checker started",{version:this.VERSION});this.clearResults();this.checkResults.checksPassed=false;var ua=navigator.userAgent;var skip=[];if(/firefox/i.test(navigator.userAgent)&&compareVersions(getFirstMatch(ua,/(?:firefox)[ \/](\d+(\.\d+)?)/i),"31")>=0||/chrome/i.test(navigator.userAgent)&&!/edge/i.test(ua)&&compareVersions(getFirstMatch(ua,/(?:chrome)\/(\d+(\.\d+)?)/i),"38")>=0||/opera|opr|opios/i.test(navigator.userAgent)&&compareVersions(getFirstMatch(ua,/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i),"38")>=0){skip.push("flash")}var detectorOptions={flash:flash,skip:skip,logger:loggerOpts};ecLogger.log("environment-checker calling detector",detectorOptions);(0,_environmentDetector2["default"])(detectorOptions).then(function(result){ecLogger.log("environment-checker received detection result",result);var flashVersionString="";if(!inArray(skip,"flash")){var flashVersion=(0,_swfobject2["default"])().getFlashPlayerVersion();flashVersionString=flashVersion.major+"."+flashVersion.minor+"."+flashVersion.release}if(!_this.checkBrowser(result)){_this.checkResults.failureReasonCode=_this.failureReasonCodes.BROWSER_NOT_CAPABLE;_this.checkResults.failureReasonString="BROWSER_NOT_CAPABLE"}else if(result.platform.type===_platform2["default"].types.MOBILE){_this.checkResults.failureReasonCode=_this.failureReasonCodes.MOBILE_BROWSER;_this.checkResults.failureReasonString="MOBILE_BROWSER"}else if(result.flash===null){_this.checkResults.failureReasonCode=_this.failureReasonCodes.FLASH_NOT_INSTALLED;_this.checkResults.failureReasonString="FLASH_NOT_INSTALLED"}else if(compareVersions(flashVersionString,_this.MIN_FLASH_VERSION)===-1){_this.checkResults.failureReasonCode=_this.failureReasonCodes.FLASH_TOO_OLD;_this.checkResults.failureReasonString="FLASH_TOO_OLD"}else if(_this.BLACKLISTED_FLASH_VERSIONS.indexOf(result.flash.version)!==-1){_this.checkResults.failureReasonCode=_this.failureReasonCodes.FLASH_BLACKLISTED;_this.checkResults.failureReasonString="FLASH_BLACKLISTED"}else if(result.flash.webcams.length===0){_this.checkResults.failureReasonCode=_this.failureReasonCodes.NO_WEBCAMS_DETECTED;_this.checkResults.failureReasonString="NO_WEBCAMS_DETECTED"}else{_this.checkResults.checksPassed=true}if(result&&_this.checkResults.failureReasonCode===_this.failureReasonCodes.FLASH_NOT_INSTALLED&&inArray(skip,"flash")){if(result.webcams.length>0){_this.checkResults.checksPassed=true;_this.checkResults.failureReasonCode=null;_this.checkResults.failureReasonString=null}else{_this.checkResults.failureReasonCode=_this.failureReasonCodes.NO_WEBCAMS_DETECTED;_this.checkResults.failureReasonString="NO_WEBCAMS_DETECTED"}}_this.checkResults.detectorResult=result;ecLogger.log("environment-checker result",_this.checkResults);return callback(_this.checkResults)},function(err){_this.checkResults.failureReasonCode=_this.failureReasonCodes.OTHER_ERROR;_this.checkResults.failureReasonString=err.message;ecLogger.log("environment-checker error",err);return callback(_this.checkResults)})},checkBrowser:function checkBrowser(res){if(inArray(res.capabilities,_capabilities2["default"].names.DOCUMENT_ALL)&&!inArray(res.capabilities,_capabilities2["default"].names.DOCUMENT_QUERY_SELECTOR)){return false}for(var i=0;i<this.BLACKLISTED_BROWSERS.length;i++){var name=this.BLACKLISTED_BROWSERS[i][0];var _BLACKLISTED_BROWSERS=this.BLACKLISTED_BROWSERS[i][1].split("-"),from=_BLACKLISTED_BROWSERS[0],to=_BLACKLISTED_BROWSERS[1];if(name===res.browser.name&&compareVersions(res.browser.version,from)>=0&&compareVersions(res.browser.version,to)<=0){return false}}return true},clearResults:function clearResults(){this.checkResults={checksPassed:null,failureReasonCode:null,failureReasonString:null}}};(function(){if(_typeof(window._RealeyesitEnvDetectParams)==="object"&&typeof window._RealeyesitEnvDetectParams._callback==="function"){window.Realeyesit.EnvironmentalDetectionAPI.start(window._RealeyesitEnvDetectParams._callback)}else{if(typeof window._RealeyesitEnvDetectCallback==="function"){window.Realeyesit.EnvironmentalDetectionAPI.start(window._RealeyesitEnvDetectCallback)}}})()},{"@realeyes/environment-detector":5,"@realeyes/environment-detector/lib/browsers":2,"@realeyes/environment-detector/lib/capabilities":3,"@realeyes/environment-detector/lib/platform":7,"@realeyes/environment-detector/lib/utils/Logger":9,swfobject:21,"uuid/v4":24}],2:[function(require,module,exports){"use strict";exports.__esModule=true;var _getFirstMatch=require("./utils/getFirstMatch");var _getFirstMatch2=_interopRequireDefault(_getFirstMatch);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var names={OPERA:"Opera",SAMSUNG_BROWSER:"Samsung Internet for Android",YANDEX_BROWSER:"Yandex Browser",PUFFIN:"Puffin",K_MELEON:"K-Meleon",WINDOWS_PHONE:"Windows Phone",INTERNET_EXPLORER:"Internet Explorer",MICROSOFT_EDGE:"Microsoft Edge",FIREFOX:"Firefox",AMAZON_SILK:"Amazon Silk",PHANTOM_JS:"PhantomJS",CHROMIUM:"Chromium",CHROME:"Chrome",ANDROID:"Android",SAFARI:"Safari",UNKNOWN:"Unknown"};var tests=[{browserName:names.OPERA,testRegex:/opera|opr|opios/i,versionRegex:/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i},{browserName:names.SAMSUNG_BROWSER,testRegex:/SamsungBrowser/i,versionRegex:/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i},{browserName:names.YANDEX_BROWSER,testRegex:/yabrowser/i,versionRegex:/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i},{browserName:names.PUFFIN,testRegex:/puffin/i,versionRegex:/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i},{browserName:names.K_MELEON,testRegex:/k-meleon/i,versionRegex:/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i},{browserName:names.WINDOWS_PHONE,testRegex:/windows phone/i,versionRegex:/(?:iemobile|edge)\/(\d+(\.\d+)?)/i},{browserName:names.INTERNET_EXPLORER,testRegex:/msie|trident/i,versionRegex:/(?:msie |rv:)(\d+(\.\d+)?)/i},{browserName:names.MICROSOFT_EDGE,testRegex:/chrome.+? edge/i,versionRegex:/edge\/(\d+(\.\d+)?)/i},{browserName:names.FIREFOX,testRegex:/firefox|iceweasel|fxios/i,versionRegex:/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i},{browserName:names.AMAZON_SILK,testRegex:/silk/i,versionRegex:/silk\/(\d+(\.\d+)?)/i},{browserName:names.PHANTOM_JS,testRegex:/phantom/i,versionRegex:/phantomjs\/(\d+(\.\d+)?)/i},{browserName:names.CHROMIUM,testRegex:/chromium/i,versionRegex:/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i},{browserName:names.CHROME,testRegex:/chrome|crios|crmo/i,versionRegex:/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i},{browserName:names.ANDROID,testRegex:/android/i,versionRegex:null},{browserName:names.SAFARI,testRegex:/safari|applewebkit/i,versionRegex:null}];exports["default"]={names:names,detect:function detect(ua){for(var i=0;i<tests.length;i++){if(tests[i].testRegex.test(ua)){return{name:tests[i].browserName,version:(0,_getFirstMatch2["default"])(ua,tests[i].versionRegex)||(0,_getFirstMatch2["default"])(ua,/version\/(\d+(\.\d+)?)/i)||null}}}return{name:names.UNKNOWN,version:null}}}},{"./utils/getFirstMatch":12}],3:[function(require,module,exports){"use strict";exports.__esModule=true;var _swfobject=require("swfobject");var _swfobject2=_interopRequireDefault(_swfobject);var _inArray=require("./utils/inArray");var _inArray2=_interopRequireDefault(_inArray);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var names={FLASH:"flash",GET_USER_MEDIA:"navigator.getUserMedia",MEDIA_RECORDER:"MediaRecorder",WEBCAM:"webcam",DOCUMENT_ALL:"document.all",DOCUMENT_QUERY_SELECTOR:"document.querySelector",HTTP:"http",HTTPS:"https",LOCALHOST:"localhost"};var tests=[{capabilityName:names.FLASH,test:function test(){var s=(0,_swfobject2["default"])();var version=s.getFlashPlayerVersion();return!(version.major===0&&version.minor===0&&version.release===0)}},{capabilityName:names.GET_USER_MEDIA,test:function test(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}},{capabilityName:names.MEDIA_RECORDER,test:function test(){return typeof window.MediaRecorder==="function"}},{capabilityName:names.DOCUMENT_ALL,test:function test(){return document.querySelector!==undefined}},{capabilityName:names.DOCUMENT_QUERY_SELECTOR,test:function test(){return typeof document.querySelector==="function"}},{capabilityName:names.HTTP,test:function test(){return document.location.protocol==="http:"}},{capabilityName:names.HTTPS,test:function test(){return document.location.protocol==="https:"}},{capabilityName:names.LOCALHOST,test:function test(){return document.location.hostname==="localhost"||document.location.hostname==="127.0.0.1"}}];exports["default"]={names:names,detect:function detect(){var skip=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var results=[];for(var i=0;i<tests.length;i++){if(!(0,_inArray2["default"])(skip,tests[i].capabilityName)&&tests[i].test()){results.push(tests[i].capabilityName)}}return results}}},{"./utils/inArray":13,swfobject:21}],4:[function(require,module,exports){"use strict";exports.__esModule=true;var _nativePromiseOnly=require("native-promise-only");var _nativePromiseOnly2=_interopRequireDefault(_nativePromiseOnly);var _swfobject=require("swfobject");var _swfobject2=_interopRequireDefault(_swfobject);var _timeout=require("./utils/timeout");var _timeout2=_interopRequireDefault(_timeout);var _waitForDocumentReady=require("./utils/waitForDocumentReady");var _waitForDocumentReady2=_interopRequireDefault(_waitForDocumentReady);var _currentScriptPath=require("./utils/currentScriptPath");var _currentScriptPath2=_interopRequireDefault(_currentScriptPath);var _visible=require("./utils/visible");var _visible2=_interopRequireDefault(_visible);var _FlashDetectionError=require("./utils/FlashDetectionError");var _FlashDetectionError2=_interopRequireDefault(_FlashDetectionError);var _TimeoutError=require("./utils/TimeoutError");var _TimeoutError2=_interopRequireDefault(_TimeoutError);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var DEFAULT_SWF_PATH=_currentScriptPath2["default"]+"environment-detector.swf";var DEFAULT_TEST_TIMEOUT=1e4;var DEFAULT_CONTAINER_ID="Realeyesit_FlashEnvironmentDetector";var DEFAULT_MIN_FLASH_VERSION="10.2.0";var flashEl=void 0;exports["default"]={embedSWF:function embedSWF(path,containerId,minFlashVersion){return new _nativePromiseOnly2["default"](function(resolve,reject){var s=(0,_swfobject2["default"])();if(flashEl!==undefined){resolve(flashEl);return}var container=document.createElement("div");container.id=containerId;document.body.appendChild(container);s.createCSS("#"+containerId,"position: absolute; top: -10px;");s.embedSWF(path,containerId,"10","1",minFlashVersion,null,null,{allowScriptAccess:"always"},null,function(e){if(!e.success){reject(new _FlashDetectionError2["default"])}else{window.Realeyesit=window.Realeyesit||{};window.Realeyesit.FlashEnvironmentDetectorReady=resolve}})})},detect:function detect(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$path=_ref.path,path=_ref$path===undefined?DEFAULT_SWF_PATH:_ref$path,_ref$testTimeout=_ref.testTimeout,testTimeout=_ref$testTimeout===undefined?DEFAULT_TEST_TIMEOUT:_ref$testTimeout,_ref$containerId=_ref.containerId,containerId=_ref$containerId===undefined?DEFAULT_CONTAINER_ID:_ref$containerId,_ref$minFlashVersion=_ref.minFlashVersion,minFlashVersion=_ref$minFlashVersion===undefined?DEFAULT_MIN_FLASH_VERSION:_ref$minFlashVersion;var _this=this;var skip=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var logger=arguments[2];if(skip){logger.log("environment-detector/flash detection skipped");return _nativePromiseOnly2["default"].resolve(null)}logger.log("environment-detector/flash detection started");return(0,_visible2["default"])().then(function(){logger.log("environment-detector/flash page visible");return(0,_timeout2["default"])(testTimeout,(0,_waitForDocumentReady2["default"])().then(function(){logger.log("environment-detector/flash document ready");return _this.embedSWF(path,containerId,minFlashVersion)}))["catch"](function(e){if(e instanceof _FlashDetectionError2["default"]){logger.log("environment-detector/flash embedding failed")}else if(e instanceof _TimeoutError2["default"]){logger.log("environment-detector/flash detection timed out")}else{logger.log("environment-detector/flash detection failed for unknown reason")}return null})})}}},{"./utils/FlashDetectionError":8,"./utils/TimeoutError":10,"./utils/currentScriptPath":11,"./utils/timeout":14,"./utils/visible":15,"./utils/waitForDocumentReady":16,"native-promise-only":20,swfobject:21}],5:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]=detect;var _browsers=require("./browsers");var _browsers2=_interopRequireDefault(_browsers);var _platform=require("./platform");var _platform2=_interopRequireDefault(_platform);var _os=require("./os");var _os2=_interopRequireDefault(_os);var _capabilities=require("./capabilities");var _capabilities2=_interopRequireDefault(_capabilities);var _flash=require("./flash");var _flash2=_interopRequireDefault(_flash);var _webcam=require("./webcam");var _webcam2=_interopRequireDefault(_webcam);var _Logger=require("./utils/Logger");var _Logger2=_interopRequireDefault(_Logger);var _inArray=require("./utils/inArray");var _inArray2=_interopRequireDefault(_inArray);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function detect(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var ua=navigator.userAgent;var logger=new _Logger2["default"](options.logger);var skipFlash=options.skip&&(0,_inArray2["default"])(options.skip,"flash");logger.log("environment-detector started",options);return _flash2["default"].detect(options.flash,skipFlash,logger).then(function(flashResult){return _webcam2["default"].detect(flashResult).then(function(webcamsResult){var result={browser:_browsers2["default"].detect(ua),platform:_platform2["default"].detect(ua),os:_os2["default"].detect(ua),flash:flashResult,webcams:webcamsResult,capabilities:_capabilities2["default"].detect(options.skip)};logger.log("environment-detector result",result);return result})})["catch"](function(e){logger.log("environment-detector failed",e);throw e})}},{"./browsers":2,"./capabilities":3,"./flash":4,"./os":6,"./platform":7,"./utils/Logger":9,"./utils/inArray":13,"./webcam":17}],6:[function(require,module,exports){"use strict";exports.__esModule=true;var _getFirstMatch=require("./utils/getFirstMatch");var _getFirstMatch2=_interopRequireDefault(_getFirstMatch);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var names={WINDOWS_PHONE:"windowsphone",IOS:"ios",ANDROID:"android",MAC_OS:"macos",WINDOWS:"windows",LINUX:"linux",UNKNOWN:"unknown"};var tests=[{osName:names.WINDOWS_PHONE,testRegex:/windows phone/i,getVersion:function getVersion(ua){return(0,_getFirstMatch2["default"])(ua,/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}},{osName:names.IOS,testRegex:/(ipod|iphone|ipad)/i,getVersion:function getVersion(ua){return(0,_getFirstMatch2["default"])(ua,/os (\d+([_\s]\d+)*) like mac os x/i).split("_").join(".")}},{osName:names.ANDROID,testRegex:/^((?!.*like android).*android)|silk/i,getVersion:function getVersion(ua){return(0,_getFirstMatch2["default"])(ua,/android[ \/-](\d+(\.\d+)*)/i)}},{osName:names.MAC_OS,testRegex:/macintosh/i,getVersion:function getVersion(ua){return ua.replace(/.*?OS X (.*?)(\)|;).*/,"$1").split("_").join(".")}},{osName:names.WINDOWS,testRegex:/windows/i,getVersion:function getVersion(ua){return ua.replace(/.*?Windows (.*?)(\)|;).*/,"$1")}},{osName:names.LINUX,testRegex:/linux/i,getVersion:function getVersion(){return null}}];exports["default"]={names:names,detect:function detect(ua){for(var i=0;i<tests.length;i++){if(tests[i].testRegex.test(ua)){return{name:tests[i].osName,version:tests[i].getVersion(ua)||(0,_getFirstMatch2["default"])(ua,/version\/(\d+\.\d+)/i)||null}}}return{name:names.UNKNOWN,version:null}}}},{"./utils/getFirstMatch":12}],7:[function(require,module,exports){"use strict";exports.__esModule=true;var _getFirstMatch=require("./utils/getFirstMatch");var _getFirstMatch2=_interopRequireDefault(_getFirstMatch);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var types={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"};exports["default"]={types:types,detect:function detect(ua){var tablet=/tablet/i.test(ua);var mobile=!tablet&&/[^-]mobi/i.test(ua);var ios=(0,_getFirstMatch2["default"])(ua,/(ipod|iphone|ipad)/i).toLowerCase();var likeAndroid=/like android/i.test(ua);var android=!likeAndroid&&/android/i.test(ua);var nexusMobile=/nexus\s*[0-6]\s*/i.test(ua);var nexusTablet=!nexusMobile&&/nexus\s*[0-9]+/i.test(ua);var androidVersion=(0,_getFirstMatch2["default"])(ua,/android[ \/-](\d+(\.\d+)*)/i).split(".")[0];var silk=/silk/i.test(ua);if(tablet||nexusTablet||ios==="ipad"||android&&(+androidVersion===3||+androidVersion>=4&&!mobile)||silk){return{type:types.TABLET}}else if(mobile||nexusMobile){return{type:types.MOBILE}}return{type:types.DESKTOP}}}},{"./utils/getFirstMatch":12}],8:[function(require,module,exports){"use strict";exports.__esModule=true;var _es6Error=require("es6-error");var _es6Error2=_interopRequireDefault(_es6Error);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var FlashDetectionError=function(_ExtendableError){_inherits(FlashDetectionError,_ExtendableError);function FlashDetectionError(){_classCallCheck(this,FlashDetectionError);return _possibleConstructorReturn(this,_ExtendableError.apply(this,arguments))}return FlashDetectionError}(_es6Error2["default"]);exports["default"]=FlashDetectionError},{"es6-error":18}],9:[function(require,module,exports){"use strict";exports.__esModule=true;var _json=require("json3");var _json2=_interopRequireDefault(_json);var _v=require("uuid/v4");var _v2=_interopRequireDefault(_v);var _currentScriptPath=require("./currentScriptPath");var _currentScriptPath2=_interopRequireDefault(_currentScriptPath);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var DEFAULT_LOGGER_PATH=_currentScriptPath2["default"]+"log.gif";var Logger=function(){function Logger(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$path=_ref.path,path=_ref$path===undefined?DEFAULT_LOGGER_PATH:_ref$path,_ref$disable=_ref.disable,disable=_ref$disable===undefined?false:_ref$disable,_ref$sid=_ref.sid,sid=_ref$sid===undefined?(0,_v2["default"])():_ref$sid;_classCallCheck(this,Logger);this.sid=sid;this.pending=Promise.resolve();this.path=path;this.disabled=disable}Logger.prototype.log=function log(name){var _this=this;var data=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.disabled){return}var msg={ts:+new Date,sid:this.sid,name:name,data:data};this.pending=this.pending.then(new Promise(function(resolve){var img=document.createElement("img");var done=function done(){img.parentNode.removeChild(img);resolve()};img.style.position="absolute";img.style.top="-10px";img.onload=done;img.onerror=done;img.src=_this.path+"?msg="+encodeURIComponent(_json2["default"].stringify(msg));document.body.appendChild(img)}))};return Logger}();exports["default"]=Logger},{"./currentScriptPath":11,json3:19,"uuid/v4":24}],10:[function(require,module,exports){"use strict";exports.__esModule=true;var _es6Error=require("es6-error");var _es6Error2=_interopRequireDefault(_es6Error);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var TimeoutError=function(_ExtendableError){_inherits(TimeoutError,_ExtendableError);function TimeoutError(){_classCallCheck(this,TimeoutError);return _possibleConstructorReturn(this,_ExtendableError.apply(this,arguments))}return TimeoutError}(_es6Error2["default"]);exports["default"]=TimeoutError},{"es6-error":18}],11:[function(require,module,exports){"use strict";exports.__esModule=true;function getPath(){if(document.currentScript!==undefined){return document.currentScript.src.split("/").slice(0,-1).join("/")+"/"}var scripts=document.getElementsByTagName("script");var src=scripts[scripts.length-1].src.split("?")[0];return src.split("/").slice(0,-1).join("/")+"/"}exports["default"]=getPath()},{}],12:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]=function(str,regex){var match=str.match(regex);if(match&&match.length>1){return match[1]}return""}},{}],13:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]=inArray;function inArray(arr,value){if(typeof Array.prototype.indexOf==="function"){return arr.indexOf(value)!==-1}for(var i=0;i<arr.length;i++){if(arr[i]===value){return true}}return false}},{}],14:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]=timeout;var _nativePromiseOnly=require("native-promise-only");var _nativePromiseOnly2=_interopRequireDefault(_nativePromiseOnly);var _TimeoutError=require("./TimeoutError");var _TimeoutError2=_interopRequireDefault(_TimeoutError);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function timeout(ms,promise){var pending=true;return _nativePromiseOnly2["default"].race([promise.then(function(v){pending=false;return v}),new _nativePromiseOnly2["default"](function(_,reject){return setTimeout(function(){if(pending){reject(new _TimeoutError2["default"])}},ms)})])}},{"./TimeoutError":10,"native-promise-only":20}],15:[function(require,module,exports){"use strict";exports.__esModule=true;var _visibilityjs=require("visibilityjs");var _visibilityjs2=_interopRequireDefault(_visibilityjs);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports["default"]=function(){return new Promise(function(resolve){_visibilityjs2["default"].onVisible(resolve)})}},{visibilityjs:25}],16:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]=function(){return new Promise(function(resolve){if(document.readyState==="complete"){resolve();return}if(typeof document.addEventListener==="function"){document.addEventListener("readystatechange",function(){if(document.readyState==="complete"){resolve()}})}else if(window.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){resolve()}})}})}},{}],17:[function(require,module,exports){"use strict";exports.__esModule=true;exports["default"]={detect:function detect(flashResult){if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){return navigator.mediaDevices.enumerateDevices().then(function(devices){var result=[];for(var i=0;i<devices.length;i++){if(devices[i].kind==="videoinput"){var name=devices[i].label?devices[i].label:"unknown";result.push(name)}}return result})}else if(flashResult!==null){return Promise.resolve(flashResult.webcams)}return Promise.resolve([])}}},{}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _extendableBuiltin(cls){function ExtendableBuiltin(){cls.apply(this,arguments)}ExtendableBuiltin.prototype=Object.create(cls.prototype,{constructor:{value:cls,enumerable:false,writable:true,configurable:true}});if(Object.setPrototypeOf){Object.setPrototypeOf(ExtendableBuiltin,cls)}else{ExtendableBuiltin.__proto__=cls}return ExtendableBuiltin}var ExtendableError=function(_extendableBuiltin2){_inherits(ExtendableError,_extendableBuiltin2);function ExtendableError(){var message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";_classCallCheck(this,ExtendableError);var _this=_possibleConstructorReturn(this,(ExtendableError.__proto__||Object.getPrototypeOf(ExtendableError)).call(this,message));Object.defineProperty(_this,"message",{configurable:true,enumerable:false,value:message,writable:true});Object.defineProperty(_this,"name",{configurable:true,enumerable:false,value:_this.constructor.name,writable:true});if(Error.hasOwnProperty("captureStackTrace")){Error.captureStackTrace(_this,_this.constructor);return _possibleConstructorReturn(_this)}Object.defineProperty(_this,"stack",{configurable:true,enumerable:false,value:new Error(message).stack,writable:true});return _this}return ExtendableError}(_extendableBuiltin(Error));exports.default=ExtendableError;module.exports=exports["default"]},{}],19:[function(require,module,exports){(function(global){(function(){var isLoader=typeof define==="function"&&define.amd;var objectTypes={"function":true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\0\b\n\f\r\t"]
})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"\t"')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){
// Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== "0"`.
return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}
// (e.g., `!("" in { "": 1})`).
return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){
// for array indices (e.g., `![1, 2, 3].hasOwnProperty("0")`).
if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports["runInContext"]=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,root["JSON3"]={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){define(function(){return JSON3})}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],20:[function(require,module,exports){(function(global){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
(function UMD(name,context,definition){context[name]=context[name]||definition();if(typeof module!="undefined"&&module.exports){module.exports=context[name]}else if(typeof define=="function"&&define.amd){define(function $AMD$(){return context[name]})}})("Promise",typeof global!="undefined"?global:this,function DEF(){"use strict";var builtInProp,cycle,scheduling_queue,ToString=Object.prototype.toString,timer=typeof setImmediate!="undefined"?function timer(fn){return setImmediate(fn)}:setTimeout;try{Object.defineProperty({},"x",{});builtInProp=function builtInProp(obj,name,val,config){return Object.defineProperty(obj,name,{value:val,writable:true,configurable:config!==false})}}catch(err){builtInProp=function builtInProp(obj,name,val){obj[name]=val;return obj}}scheduling_queue=function Queue(){var first,last,item;function Item(fn,self){this.fn=fn;this.self=self;this.next=void 0}return{add:function add(fn,self){item=new Item(fn,self);if(last){last.next=item}else{first=item}last=item;item=void 0},drain:function drain(){var f=first;first=last=cycle=void 0;while(f){f.fn.call(f.self);f=f.next}}}}();function schedule(fn,self){scheduling_queue.add(fn,self);if(!cycle){cycle=timer(scheduling_queue.drain)}}function isThenable(o){var _then,o_type=typeof o;if(o!=null&&(o_type=="object"||o_type=="function")){_then=o.then}return typeof _then=="function"?_then:false}function notify(){for(var i=0;i<this.chain.length;i++){notifyIsolated(this,this.state===1?this.chain[i].success:this.chain[i].failure,this.chain[i])}this.chain.length=0}function notifyIsolated(self,cb,chain){var ret,_then;try{if(cb===false){chain.reject(self.msg)}else{if(cb===true){ret=self.msg}else{ret=cb.call(void 0,self.msg)}if(ret===chain.promise){chain.reject(TypeError("Promise-chain cycle"))}else if(_then=isThenable(ret)){_then.call(ret,chain.resolve,chain.reject)}else{chain.resolve(ret)}}}catch(err){chain.reject(err)}}function resolve(msg){var _then,self=this;if(self.triggered){return}self.triggered=true;if(self.def){self=self.def}try{if(_then=isThenable(msg)){schedule(function(){var def_wrapper=new MakeDefWrapper(self);try{_then.call(msg,function $resolve$(){resolve.apply(def_wrapper,arguments)},function $reject$(){reject.apply(def_wrapper,arguments)})}catch(err){reject.call(def_wrapper,err)}})}else{self.msg=msg;self.state=1;if(self.chain.length>0){schedule(notify,self)}}}catch(err){reject.call(new MakeDefWrapper(self),err)}}function reject(msg){var self=this;if(self.triggered){return}self.triggered=true;if(self.def){self=self.def}self.msg=msg;self.state=2;if(self.chain.length>0){schedule(notify,self)}}function iteratePromises(Constructor,arr,resolver,rejecter){for(var idx=0;idx<arr.length;idx++){(function IIFE(idx){Constructor.resolve(arr[idx]).then(function $resolver$(msg){resolver(idx,msg)},rejecter)})(idx)}}function MakeDefWrapper(self){this.def=self;this.triggered=false}function MakeDef(self){this.promise=self;this.state=0;this.triggered=false;this.chain=[];this.msg=void 0}function Promise(executor){if(typeof executor!="function"){throw TypeError("Not a function")}if(this.__NPO__!==0){throw TypeError("Not a promise")}this.__NPO__=1;var def=new MakeDef(this);this["then"]=function then(success,failure){var o={success:typeof success=="function"?success:true,failure:typeof failure=="function"?failure:false};o.promise=new this.constructor(function extractChain(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}o.resolve=resolve;o.reject=reject});def.chain.push(o);if(def.state!==0){schedule(notify,def)}return o.promise};this["catch"]=function $catch$(failure){return this.then(void 0,failure)};try{executor.call(void 0,function publicResolve(msg){resolve.call(def,msg)},function publicReject(msg){reject.call(def,msg)})}catch(err){reject.call(def,err)}}var PromisePrototype=builtInProp({},"constructor",Promise,false);Promise.prototype=PromisePrototype;builtInProp(PromisePrototype,"__NPO__",0,false);builtInProp(Promise,"resolve",function Promise$resolve(msg){var Constructor=this;if(msg&&typeof msg=="object"&&msg.__NPO__===1){return msg}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}resolve(msg)})});builtInProp(Promise,"reject",function Promise$reject(msg){return new this(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}reject(msg)})});builtInProp(Promise,"all",function Promise$all(arr){var Constructor=this;if(ToString.call(arr)!="[object Array]"){return Constructor.reject(TypeError("Not an array"))}if(arr.length===0){return Constructor.resolve([])}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}var len=arr.length,msgs=Array(len),count=0;iteratePromises(Constructor,arr,function resolver(idx,msg){msgs[idx]=msg;if(++count===len){resolve(msgs)}},reject)})});builtInProp(Promise,"race",function Promise$race(arr){var Constructor=this;if(ToString.call(arr)!="[object Array]"){return Constructor.reject(TypeError("Not an array"))}return new Constructor(function executor(resolve,reject){if(typeof resolve!="function"||typeof reject!="function"){throw TypeError("Not a function")}iteratePromises(Constructor,arr,function resolver(idx,msg){resolve(msg)},reject)})});return Promise})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],21:[function(require,module,exports){/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
 is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],storedFbContent,storedFbContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,encodeURIEnabled=false,ua=function(){var w3cdom=typeof doc.getElementById!==UNDEF&&typeof doc.getElementsByTagName!==UNDEF&&typeof doc.createElement!==UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=nav.appName==="Microsoft Internet Explorer",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!==UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]===OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&(typeof nav.mimeTypes!==UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=toInt(d.replace(/^(.*)\..*$/,"$1"));playerVersion[1]=toInt(d.replace(/^.*\.(.*)\s.*$/,"$1"));playerVersion[2]=/[a-zA-Z]/.test(d)?toInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}}else if(typeof win.ActiveXObject!==UNDEF){try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[toInt(d[0]),toInt(d[1]),toInt(d[2])]}}}catch(e){}}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3){return}if(typeof doc.readyState!==UNDEF&&(doc.readyState==="complete"||doc.readyState==="interactive")||typeof doc.readyState===UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body)){callDomLoadFunctions()}if(!isDomLoaded){if(typeof doc.addEventListener!==UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,false)}if(ua.ie){doc.attachEvent(ON_READY_STATE_CHANGE,function detach(){if(doc.readyState==="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,detach);callDomLoadFunctions()}});if(win==top){(function checkDomLoadedIE(){if(isDomLoaded){return}try{doc.documentElement.doScroll("left")}catch(e){setTimeout(checkDomLoadedIE,0);return}callDomLoadFunctions()})()}}if(ua.wk){(function checkDomLoadedWK(){if(isDomLoaded){return}if(!/loaded|complete/.test(doc.readyState)){setTimeout(checkDomLoadedWK,0);return}callDomLoadFunctions()})()}}}();function callDomLoadFunctions(){if(isDomLoaded||!document.getElementsByTagName("body")[0]){return}try{var t,span=createElement("span");span.style.display="none";t=doc.getElementsByTagName("body")[0].appendChild(span);t.parentNode.removeChild(t);t=null;span=null}catch(e){return}isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!==UNDEF){win.addEventListener("load",fn,false)}else if(typeof doc.addEventListener!==UNDEF){doc.addEventListener("load",fn,false)}else if(typeof win.attachEvent!==UNDEF){addListener(win,"onload",fn)}else if(typeof win.onload==="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("style","visibility: hidden;");o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function checkGetVariable(){if(typeof t.GetVariable!==UNDEF){try{var d=t.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");ua.pv=[toInt(d[0]),toInt(d[1]),toInt(d[2])]}}catch(e){ua.pv=[8,0,0]}}else if(counter<10){counter++;setTimeout(checkGetVariable,10);return}b.removeChild(o);t=null;matchVersions()})()}else{matchVersions()}}function matchVersions(){var rl=regObjArr.length;if(rl>0){for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj){if(hasPlayerVersion(regObjArr[i].swfVersion)&&!(ua.wk&&ua.wk<312)){// Flash Player version >= published SWF version: Houston, we have a match!
setVisibility(id,true);if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cbObj.id=id;cb(cbObj)}}else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class")){att.styleclass=obj.getAttribute("class")}if(obj.getAttribute("align")){att.align=obj.getAttribute("align")}var par={};var p=obj.getElementsByTagName("param");var pl=p.length;for(var j=0;j<pl;j++){if(p[j].getAttribute("name").toLowerCase()!=="movie"){par[p[j].getAttribute("name")]=p[j].getAttribute("value")}}showExpressInstall(att,par,id,cb)}else{displayFbContent(obj);if(cb){cb(cbObj)}}}}else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!==UNDEF){cbObj.success=true;cbObj.ref=o;cbObj.id=o.id}cb(cbObj)}}}}}domLoadFnArr[0]=function(){if(plugin){testPlayerVersion()}else{matchVersions()}};function getObjectById(objectIdStr){var r=null,o=getElementById(objectIdStr);if(o&&o.nodeName.toUpperCase()==="OBJECT"){if(typeof o.SetVariable!==UNDEF){r=o}else{r=o.getElementsByTagName(OBJECT)[0]||o}}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){var obj=getElementById(replaceElemIdStr);replaceElemIdStr=getId(replaceElemIdStr);isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};if(obj){if(obj.nodeName.toUpperCase()==="OBJECT"){storedFbContent=abstractFbContent(obj);storedFbContentId=null}else{storedFbContent=obj;storedFbContentId=replaceElemIdStr}att.id=EXPRESS_INSTALL_ID;if(typeof att.width===UNDEF||!/%$/.test(att.width)&&toInt(att.width)<310){att.width="310"}if(typeof att.height===UNDEF||!/%$/.test(att.height)&&toInt(att.height)<137){att.height="137"}var pt=ua.ie?"ActiveX":"PlugIn",fv="MMredirectURL="+encodeURIComponent(win.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+pt+"&MMdoctitle="+encodeURIComponent(doc.title.slice(0,47)+" - Flash Player Installation");if(typeof par.flashvars!==UNDEF){par.flashvars+="&"+fv}else{par.flashvars=fv}if(ua.ie&&obj.readyState!=4){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";removeSWF(obj)}createSWF(att,par,replaceElemIdStr)}}function displayFbContent(obj){if(ua.ie&&obj.readyState!=4){obj.style.display="none";var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractFbContent(obj),el);removeSWF(obj)}else{obj.parentNode.replaceChild(abstractFbContent(obj),obj)}}function abstractFbContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName==="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createIeObject(url,paramStr){var div=createElement("div");div.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+url+"'>"+paramStr+"</object>";return div.firstChild}function createSWF(attObj,parObj,id){var r,el=getElementById(id);id=getId(id);if(ua.wk&&ua.wk<312){return r}if(el){var o=ua.ie?createElement("div"):createElement(OBJECT),attr,attrLower,param;if(typeof attObj.id===UNDEF){attObj.id=id}for(param in parObj){if(parObj.hasOwnProperty(param)&&param.toLowerCase()!=="movie"){createObjParam(o,param,parObj[param])}}if(ua.ie){o=createIeObject(attObj.data,o.innerHTML)}for(attr in attObj){if(attObj.hasOwnProperty(attr)){attrLower=attr.toLowerCase();if(attrLower==="styleclass"){o.setAttribute("class",attObj[attr])}else if(attrLower!=="classid"&&attrLower!=="data"){o.setAttribute(attr,attObj[attr])}}}if(ua.ie){objIdArr[objIdArr.length]=attObj.id}else{o.setAttribute("type",FLASH_MIME_TYPE);o.setAttribute("data",attObj.data)}el.parentNode.replaceChild(o,el);r=o}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&obj.nodeName.toUpperCase()==="OBJECT"){if(ua.ie){obj.style.display="none";(function removeSWFInIE(){if(obj.readyState==4){for(var i in obj){if(typeof obj[i]==="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}else{setTimeout(removeSWFInIE,10)}})()}else{obj.parentNode.removeChild(obj)}}}function isElement(id){return id&&id.nodeType&&id.nodeType===1}function getId(thing){return isElement(thing)?thing.id:thing}function getElementById(id){if(isElement(id)){return id}var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function toInt(str){return parseInt(str,10)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){rv+="";var pv=ua.pv,v=rv.split(".");v[0]=toInt(v[0]);v[1]=toInt(v[1])||0;v[2]=toInt(v[2])||0;return pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?true:false}function createCSS(sel,decl,media,newStyle){var h=doc.getElementsByTagName("head")[0];if(!h){return}var m=typeof media==="string"?media:"screen";if(newStyle){dynamicStylesheet=null;dynamicStylesheetMedia=null}if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&typeof doc.styleSheets!==UNDEF&&doc.styleSheets.length>0){dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]}dynamicStylesheetMedia=m}if(dynamicStylesheet){if(typeof dynamicStylesheet.addRule!==UNDEF){dynamicStylesheet.addRule(sel,decl)}else if(typeof doc.createTextNode!==UNDEF){dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}}}function setVisibility(id,isVisible){if(!autoHideShow){return}var v=isVisible?"visible":"hidden",el=getElementById(id);if(isDomLoaded&&el){el.style.visibility=v}else if(typeof id==="string"){createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!==null;return hasBadChars&&typeof encodeURIComponent!==UNDEF?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)}else if(callbackFn){callbackFn({success:false,id:objectIdStr})}},getObjectById:function(objectIdStr){if(ua.w3){return getObjectById(objectIdStr)}},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var id=getId(replaceElemIdStr),callbackObj={success:false,id:id};if(ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr){setVisibility(id,false);addDomLoadEvent(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){att[i]=attObj[i]}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){par[j]=parObj[j]}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj.hasOwnProperty(k)){var key=encodeURIEnabled?encodeURIComponent(k):k,value=encodeURIEnabled?encodeURIComponent(flashvarsObj[k]):flashvarsObj[k];if(typeof par.flashvars!==UNDEF){par.flashvars+="&"+key+"="+value}else{par.flashvars=key+"="+value}}}}if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==id){setVisibility(id,true)}callbackObj.success=true;callbackObj.ref=obj;callbackObj.id=obj.id}else if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}else{setVisibility(id,true)}if(callbackFn){callbackFn(callbackObj)}})}else if(callbackFn){callbackFn(callbackObj)}},switchOffAutoHideShow:function(){autoHideShow=false},enableUriEncoding:function(bool){encodeURIEnabled=typeof bool===UNDEF?true:bool},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall()){showExpressInstall(att,par,replaceElemIdStr,callbackFn)}},removeSWF:function(objElemIdStr){if(ua.w3){removeSWF(objElemIdStr)}},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3){createCSS(selStr,declStr,mediaStr,newStyleBoolean)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)){q=q.split("?")[1]}if(!param){return urlEncodeIfNecessary(q)}var pairs=q.split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedFbContent){obj.parentNode.replaceChild(storedFbContent,obj);if(storedFbContentId){setVisibility(storedFbContentId,true);if(ua.ie){storedFbContent.style.display="block"}}if(storedCallbackFn){storedCallbackFn(storedCallbackObj)}}isExpressInstallActive=false}},version:"2.3"}};module.exports=swfobject},{}],22:[function(require,module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}module.exports=bytesToUuid},{}],23:[function(require,module,exports){(function(global){var rng;var crypto=global.crypto||global.msCrypto;if(crypto&&crypto.getRandomValues){var rnds8=new Uint8Array(16);rng=function whatwgRNG(){crypto.getRandomValues(rnds8);return rnds8}}if(!rng){var rnds=new Array(16);rng=function(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}module.exports=rng}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],24:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options=="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},{"./lib/bytesToUuid":22,"./lib/rng":23}],25:[function(require,module,exports){module.exports=require("./lib/visibility.timers.js")},{"./lib/visibility.timers.js":27}],26:[function(require,module,exports){(function(global){"use strict";var lastId=-1;var self={onVisible:function(callback){var support=self.isSupported();if(!support||!self.hidden()){callback();return support}var listener=self.change(function(e,state){if(!self.hidden()){self.unbind(listener);callback()}});return listener},change:function(callback){if(!self.isSupported()){return false}lastId+=1;var number=lastId;self._callbacks[number]=callback;self._listen();return number},unbind:function(id){delete self._callbacks[id]},afterPrerendering:function(callback){var support=self.isSupported();var prerender="prerender";if(!support||prerender!=self.state()){callback();return support}var listener=self.change(function(e,state){if(prerender!=state){self.unbind(listener);callback()}});return listener},
//   if ( !Visibility.hidden() ) {
hidden:function(){return!!(self._doc.hidden||self._doc.webkitHidden)},state:function(){return self._doc.visibilityState||self._doc.webkitVisibilityState||"visible"},isSupported:function(){return!!(self._doc.visibilityState||self._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(event){var state=self.state();for(var i in self._callbacks){self._callbacks[i].call(self._doc,event,state)}},_listen:function(){if(self._init){return}var event="visibilitychange";if(self._doc.webkitVisibilityState){event="webkit"+event}var listener=function(){self._change.apply(self,arguments)};if(self._doc.addEventListener){self._doc.addEventListener(event,listener)}else{self._doc.attachEvent(event,listener)}self._init=true}};if(typeof module!="undefined"&&module.exports){module.exports=self}else{global.Visibility=self}})(this)},{}],27:[function(require,module,exports){(function(window){"use strict";var lastTimer=-1;var install=function(Visibility){Visibility.every=function(interval,hiddenInterval,callback){Visibility._time();if(!callback){callback=hiddenInterval;hiddenInterval=null}lastTimer+=1;var number=lastTimer;Visibility._timers[number]={visible:interval,hidden:hiddenInterval,callback:callback};Visibility._run(number,false);if(Visibility.isSupported()){Visibility._listen()}return number};Visibility.stop=function(id){if(!Visibility._timers[id]){return false}Visibility._stop(id);delete Visibility._timers[id];return true};Visibility._timers={};Visibility._time=function(){if(Visibility._timed){return}Visibility._timed=true;Visibility._wasHidden=Visibility.hidden();Visibility.change(function(){Visibility._stopRun();Visibility._wasHidden=Visibility.hidden()})};Visibility._run=function(id,runNow){var interval,timer=Visibility._timers[id];if(Visibility.hidden()){if(null===timer.hidden){return}interval=timer.hidden}else{interval=timer.visible}var runner=function(){timer.last=new Date;timer.callback.call(window)};if(runNow){var now=new Date;var last=now-timer.last;if(interval>last){timer.delay=setTimeout(function(){timer.id=setInterval(runner,interval);runner()},interval-last)}else{timer.id=setInterval(runner,interval);runner()}}else{timer.id=setInterval(runner,interval)}};Visibility._stop=function(id){var timer=Visibility._timers[id];clearInterval(timer.id);clearTimeout(timer.delay);delete timer.id;delete timer.delay};Visibility._stopRun=function(event){var isHidden=Visibility.hidden(),wasHidden=Visibility._wasHidden;if(isHidden&&!wasHidden||!isHidden&&wasHidden){for(var i in Visibility._timers){Visibility._stop(i);Visibility._run(i,!isHidden)}}};return Visibility};if(typeof module!="undefined"&&module.exports){module.exports=install(require("./visibility.core"))}else{install(window.Visibility)}})(window)},{"./visibility.core":26}]},{},[1]);
//# sourceMappingURL=Realeyesit.EnvironmentalDetectionAPI.min.js.map
